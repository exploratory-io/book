---
name: create-note
description: Exploratoryに関するノート記事を自動作成する。公式リサーチ・一般リサーチ・執筆・レビューの4つのサブエージェントをオーケストレーションして記事を完成させる。
  トリガー: "ノート作成", "記事作成", "create note", "ノートを作って"
  使用場面: (1) Exploratoryの機能に関するノート記事を新規作成する (2) 既存のノートを別言語で作成する
---

# Exploratoryノート自動作成スキル

## 概要

このスキルは、Exploratoryに関するノート記事をサブエージェントを使って自動作成します。

## 必要な入力

ユーザーから以下の情報を受け取る：

1. **記事タイトル**（必須）: 記事のタイトルまたは質問
2. **追加コンテキスト**（任意）: 参考URL、PDF、追加指示など
3. **出力先フォルダ**（任意）: デフォルトは `./output/`
4. **言語**（任意）: デフォルトは日本語。英語版作成の場合は元の日本語版と英語版元記事の指定が必要

## 実行フロー

```
[入力: タイトル + コンテキスト]
        |
        ├──（並列）──┐
        |             |
   [公式リサーチ]  [一般リサーチ]
        |             |
        └──────┬──────┘
               |
          [ライター（執筆）]
               |
          [エディター（レビュー）]
               |
          ┌────┴────┐
          |          |
       [合格]     [差し戻し]──→ [ライター再執筆] → [エディター再レビュー]
          |                      （最大2回）
       [出力: MDファイル]
```

## ステップ1: リサーチ（並列実行）

2つのサブエージェントを**並列**でTaskツールを使って起動する。

### 公式リサーチャー

```
Task:
  description: "公式リサーチ: {タイトル}"
  subagent_type: general-purpose
  prompt: |
    以下の指示書に従って、Exploratoryの公式情報をリサーチしてください。

    ## タイトル
    {タイトル}

    ## 追加コンテキスト
    {コンテキストがあれば}

    ## 指示書
    {agents/official_researcher.md の内容を埋め込む}
```

### 一般リサーチャー

```
Task:
  description: "一般リサーチ: {タイトル}"
  subagent_type: general-purpose
  prompt: |
    以下の指示書に従って、補完情報をリサーチしてください。

    ## タイトル
    {タイトル}

    ## 追加コンテキスト
    {コンテキストがあれば}

    ## 指示書
    {agents/general_researcher.md の内容を埋め込む}
```

## ステップ2: 執筆

リサーチ結果を統合してライターサブエージェントに渡す。

```
Task:
  description: "記事執筆: {タイトル}"
  subagent_type: general-purpose
  prompt: |
    以下のリサーチ結果を基に記事を執筆してください。

    ## タイトル
    {タイトル}

    ## 公式リサーチ結果
    {ステップ1の公式リサーチ結果}

    ## 一般リサーチ結果
    {ステップ1の一般リサーチ結果}

    ## 追加コンテキスト
    {ユーザーからの追加指示があれば}

    ## 指示書
    {agents/writer.md の内容を埋め込む}
```

## ステップ3: レビュー

執筆された記事をエディターサブエージェントに渡す。

```
Task:
  description: "記事レビュー: {タイトル}"
  subagent_type: general-purpose
  prompt: |
    以下の記事をレビューしてください。

    ## 記事内容
    {ステップ2の執筆結果}

    ## 公式リサーチ結果（検証用）
    {ステップ1の公式リサーチ結果}

    ## 指示書
    {agents/editor.md の内容を埋め込む}
```

## ステップ4: 差し戻し対応（必要な場合）

エディターが差し戻した場合：
1. フィードバックをライターに渡して再執筆（ステップ2に戻る）
2. 再レビュー（ステップ3に戻る）
3. 最大2回まで繰り返す

## ステップ5: 出力

合格した記事をMarkdownファイルとして保存する。

```
Write:
  file_path: {出力先フォルダ}/{タイトル}.md
  content: {合格した記事内容}
```

## 英語版作成時の追加フロー

英語版を作成する場合は、以下の追加ステップが入る：

1. 日本語版のMDファイルを読み込む
2. 対応する英語版の元記事があれば、WebFetchで画像パスを取得する
3. ライターに「英語版作成モード」として渡す（writer.mdの英語版ルール適用）

## 実行時の注意

- リサーチは並列で実行してコンテキストを節約する
- 各サブエージェントにはMDの指示書の内容を**直接プロンプトに埋め込む**（ファイルパスの参照ではなく）
- ユーザーが途中で修正版を提供した場合は、その修正版をベースとして扱う
- PDFが参考資料として提供された場合は、Readツールでページ分割して読み込む
