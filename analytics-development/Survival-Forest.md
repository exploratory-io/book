目的変数である<%= target %>の発生までの時間と選択された予測変数との関係を調べるためにサバイバル・フォレストを使った予測モデルが作られました。

# モデルの指標

{{summary_chart}}

## 説明能力

<% if (concordance > 0.9) { %>
  一致係数は<%= concordance %>と非常に高く、このモデルは<%= target %>の生存時間の順序を非常に正確に予測できることを示しています。これは、ランダムに選んだ2つの観察対象（行）において、モデルが生存時間の長短を正しく順序付ける確率が約<%= 100 * concordance %>%であることを意味します。
<% } else if (concordance > 0.8) { %>
  一致係数は<%= concordance %>と高く、このモデルは<%= target %>の生存時間の順序を正確に予測できることを示しています。これは、ランダムに選んだ2つの観察対象（行）において、モデルが生存時間の長短を正しく順序付ける確率が約<%= 100 * concordance %>%であることを意味します。
<% } else if (concordance > 0.7) { %>
  一致係数は<%= concordance %>と中程度で、このモデルは<%= target %>の生存時間の順序をある程度予測できることを示しています。これは、ランダムに選んだ2つの観察対象（行）において、モデルが生存時間の長短を正しく順序付ける確率が約<%= 100 * concordance %>%であることを意味します。
<% } else { %>
  一致係数は<%= concordance %>とやや低く、このモデルによる<%= target %>の生存時間の順序予測は限定的です。これは、ランダムに選んだ2つの観察対象（行）において、モデルが生存時間の長短を正しく順序付ける確率が約<%= 100 * concordance %>%であることを意味します。
<% } %>


<% if (time_dependent_auc > 0.9) { %>
  時点AUC (time-dependent-AUC) は<%= 100 * time_dependent_auc %>% (<%= time_dependent_auc %>)と非常に高く、このモデルは特定の時点における<%= target %>のTRUEとFALSEをうまく切り分けられていることを示しています。
<% } else if (time_dependent_auc > 0.8) { %>
  時点AUC (time-dependent-AUC) は<%= 100 * time_dependent_auc %>% (<%= time_dependent_auc %>)と高く、このモデルは特定の時点における<%= target %>のTRUEとFALSEを切り分けられていることを示しています。
<% } else if (time_dependent_auc > 0.7) { %>
  時点AUC (time-dependent-AUC) は<%= 100 * time_dependent_auc %>% (<%= time_dependent_auc %>)と中程度で、このモデルは特定の時点における<%= target %>のTRUEとFALSEをある程度切り分けられていることを示しています。
<% } else { %>
  時点AUC (time-dependent-AUC) は<%= 100 * time_dependent_auc %>% (<%= time_dependent_auc %>)と低く、このモデルは特定の時点における<%= target %>のTRUEとFALSEをあまり切り分けられていないことを示しています。
<% } %>

{start_show_hide}
## モデルの指標の詳細

* 一致係数
  * 一致係数はモデルの予測能力を示す指標で、ランダムに選んだ観察対象（行）のうち、モデルが実際の生存時間順序を正しく予測できる確率を表します。
  * 値は0.5から1の間で、0.5はランダム予測と同等、1は完璧な予測を意味します。
  * 一般的に0.7以上で許容可能、0.8以上で良好な予測性能と解釈されます。

* 一致係数の標準誤差
  * 一致係数の標準誤差は、推定された一致係数の精度を示します。
  * 値が小さいほど、一致係数の推定精度が高いことを意味します。
  * 一致係数±1.96×標準誤差で95%信頼区間が計算できます。

* 時点AUC
  * 時点AUCは特定の時点におけるモデルの識別能力を示す指標です。
  * 値は0.5から1の間で、0.5はランダム予測、1は完璧な識別能力を意味します。
  * 複数の時点でのAUCを確認することで、モデルの予測性能の時間的安定性を評価できます。

* 行数
  * 行数は分析に使用したデータの総数（サンプルサイズ）です。
  * データ数が多いほど、統計的検定の検出力が高まり、結果の信頼性が向上します。
  * 生存時間分析では、イベント発生数（TRUE）と打ち切り数の両方が重要です。

* 行数 (TRUE)
  * イベントが発生したデータの行数を示します。
  * コックス回帰では、イベント発生数が少ない場合、推定の精度が低下する可能性があります。
  * 一般的に、予測変数1つあたり少なくとも10〜20のイベント発生が推奨されます。
{end_show_hide}

# 生存状態と予測変数の関係

## 予測変数の重要度

<%= event %>の発生確率を予測するためにどの予測変数が相対的により重要なのかを表したのが以下のチャートです。

{{variable_importance}}

## 目的変数に対する予測変数の効果

それぞれの予測変数の値が変わると、<%= event %>の発生確率がどのように変わるかを表したのが以下のチャートです。それぞれの予測変数は上記の「予測変数の重要度」の順番で並んでいます。

{{variable_effect}}

## 生存曲線

モデルに基づいた予測変数ごとの生存曲線を表したのが以下のグラフです。この曲線は、時間の経過に伴う生存確率（イベント非発生確率）の予測値を示しています。

{{survival_curve}}

# 次のステップ

* 変数選択の最適化：変数重要度が低い予測変数を除外して、モデルをシンプルにすることを検討してください。これにより、モデルの解釈がしやすくなり、過剰適合のリスクも減少します。
* グループ別分析：グループごとに別々のモデルを作成することで、それぞれのグループ内での生存時間の決定要因をより詳細に理解できるかもしれません。その場合は、「繰り返し」にグループとなる変数を選択し、実行し直すことができます。
* 外れ値の確認：予測精度に影響を与える可能性のある外れ値がないか確認し、必要に応じて対処することで、モデルの信頼性が向上する可能性があります。
* モデルの評価：このモデルの予測性能をより厳密に評価するために、トレーニングデータとテストデータに分けて検証することを検討してください。

# 補足情報

## トレーニングデータに対する予測

元のデータに対して、作成された予測モデルを使って予測した結果が以下の表となります。

{{data}}


## 時間依存ROC曲線

この曲線は、モデルの分類性能を様々な閾値で評価するROC曲線です。Y軸は真陽性率（感度）、X軸は偽陽性率（1-特異度）を表しています。青い線は今回のモデルのROC曲線で、対角線の灰色の点線はランダムな予測（AUC: 0.5）を意味します。曲線が左上に膨らむほど予測精度が高く、対角線に近いほど予測精度が低いことを示します。

{{roc_curve}}