# マーケット・バスケット分析を使った併売商品関係の分析

## 分析の概要

マーケット・バスケット分析は、一緒に購入される商品の組み合わせパターンを発見するための手法です。例えば「おむつを買った人はビールも買う傾向がある」といった、一見関連がなさそうな商品間の関係性を見つけることができます。

この分析には、「商品」（カゴの中身）と「注文番号」（どのバスケットに属するか）の情報が必要です。1行が1つのバスケット（買い物カゴ）の中の1つの商品を表すデータ形式で分析を行います。

## ネットワーク図

以下のネットワーク図は、商品間の購買関係を視覚的に表したものです。

{{variable_importance}}

**ネットワーク図の読み方**:
* 丸い**ノード**は個々の商品またはルールを表しています
* **ルール**から伸びる矢印は、どの商品が他のどの商品と一緒に購入される傾向があるかを示しています
* **ノードの大きさ**はSupport（支持度）の相対的な大きさを表し、大きいほど頻繁に起こる組み合わせを意味します
* **ノードの色**はConfidence（確信度）の強さを表し、色が濃いほど関係性が強いことを示します

例えば、「ウイスキー」から伸びる矢印が「ビール」につながっている場合、「ウイスキーを購入した人はビールも購入する傾向がある」ということを示しています。また、「バター」と「豚肉」から同じルールに矢印が伸びている場合は、「バターと豚肉の両方を購入した人は別の特定の商品（例えば牛乳）も購入する傾向がある」と解釈できます。

## 散布図

以下の散布図は、商品組み合わせの支持度と確信度の関係を示しています。

{{variable_effect}}

**散布図の読み方**:
* **X軸（支持度）**: その商品組み合わせが全取引の中で発生する割合
* **Y軸（確信度）**: ある商品が購入されたとき、別の特定の商品も購入される確率
* **円の大きさ**: リフト値（偶然を超えた関連性の強さ）

右上に位置する組み合わせほど支持度と確信度の両方が高く、特に重要な関連性を持っています。

## データ

以下の表は、発見された購買パターンの詳細データです。

{{data}}

**テーブルの見方**:
* **アイテムリスト**: ルールの前提となる商品（「〜を購入したとき」の部分）
* **共に購入されるアイテム**: ルールの結果となる商品（「〜も購入される」の部分）
* **支持度**: その組み合わせが全取引に占める割合（値が大きいほど頻繁に発生）
* **確信度**: 前提商品が購入されたときに結果商品も購入される確率
* **リフト**: 偶然以上の関連性の強さを示す指標
 * リフト > 1: 正の関連性あり（一緒に購入される傾向が強い）
 * リフト = 1: 関連性なし（偶然と同程度）
 * リフト < 1: 負の関連性あり（一緒に購入されない傾向）

例えば、一行目は「赤ワインとビールを購入したとき、ウイスキーも購入される」というルールを表しています。