const template = 
`

# モデルの指標

<% if (test_mode) { %>
モデルの予測精度や有意性に関する様々な指標を、以下の表にまとめています。現在テストモードであるため、予測精度に対してはトレーニングデータとテストデータ両方に対しての指標を表示しています。
<% } else { %>
モデルの予測精度や有意性に関する様々な指標を以下の表にまとめています。
<% } %>


{{summary}}

## 予測精度

### R2乗

<% if (r_square > 0.8) { %>
  R2乗は<%= r_square_pct %>% (<%= r_square %>)と非常に高く、これは選択された説明変数で<%= target %>のばらつきのほとんどを説明できることを示しています。
<% } else if (r_square > 0.6) { %>
  R2乗は<%= r_square_pct %>% (<%= r_square %>)と高く、これは選択された説明変数で<%= target %>のばらつきをうまく説明できることを示しています。
<% } else if (r_square > 0.4) { %>
  R2乗は<%= r_square_pct %>% (<%= r_square %>)と中程度ですが、選択された説明変数で<%= target %>のばらつきをそれなりに説明できることを示しています。
<% } else if (r_square > 0.2) { %>
  R2乗は<%= r_square_pct %>% (<%= r_square %>)と低いですが、選択された説明変数で<%= target %>のばらつきのある程度の傾向は捉えているが、重要な説明変数が抜けている可能性があります。
<% } else { %>
  R2乗は<%= r_square_pct %>% (<%= r_square %>)と非常に低いため、選択された説明変数では<%= target %>のばらつきはあまり説明できていません。
<% } %>

### RMSE

RMSE（平均二乗誤差のルート）は<%= rmse %>で、この予測モデルを使って予測すると、平均して<%= rmse %>ほど実測値との差がでることが想定されます。

{{summary}}
{start_show_hide}
## 主要な統計指標

* R2乗
  * R2乗は目的変数の値のばらつきのうち、このモデルに使われている予測変数によって説明される割合を示します。
  * 値は0から1の間で、1はモデルが完全に目的変数の値を予測できることを意味します。
  * 一般的に0.8以上で非常に高い、0.6～0.8で高い、0.4～0.6で中程度、0.2～0.4で低い、0.2未満で非常に低いモデル適合度と解釈されることが多いです。

* RMSE
  * RMSEは平均二乗誤差の平方根を表し、予測値と実測値の誤差の大きさを測定します。
  * 目的変数と同じ単位で表されるため解釈しやすく、値が小さいほど予測精度が高いことを意味します。
  * 0以上の値を取り、完璧な予測であれば0になります。

<!-- 行数についての説明は必要か判断いただきたい。 -->
* 行数
  * 行数は分析に使用したデータの総数（サンプルサイズ）を示します。
  * データ数が多いほど、モデルの信頼性が高まりますが、計算コストも増加します。

{end_show_hide}

# 変数間の関係

<% if (predictorColumns.length > 1) { %>
## 説明変数の重要度

<%= target %>を予測するためにどの説明変数が相対的により重要なのかを表したのが以下のチャートです。

{{variable_importance}}

<% } %>

## 説明変数の影響度

それぞれの説明変数の値が変わると、<%= target %>の値がどのように変わるかを表したのが以下のチャートです。

{{variable_effect}}

説明変数が数値型の場合は、X軸の値が変化した時に予測値がどのように変化していくのかをラインチャートで可視化しています。説明変数が文字列型、ロジカル型の場合はその値での予測値を点として表現しています。

<% if (predictorColumns.length > 1) { %>

_説明変数は上記の「説明変数の重要度」にある重要度の高い順番で並んでいます。_
<% } %>


# 補足情報

<% if (!test_mode) { %>
## トレーニングデータに対する予測
トレーニングデータに対して、作成された予測モデルを使って予測した結果が以下の表となります。
<% } else { %>
## トレーニング・テストデータに対する予測
トレーニングデータとテストデータに対して、作成された予測モデルを使って予測した結果が以下の表となります。
<% } %>
{start_lazy_show_hide}
### 予測結果
{{data}}
{end_lazy_show_hide}

## 実測値と予測値の関係

<% if (!test_mode) { %>
予測した結果、元の実測値と予測値にはズレがありますが、それらの関係を散布図を使って可視化したのが以下のチャートです。それぞれの点はそれぞれの行を表しています。
<% } else { %>
予測した結果、元の実測値と予測値にはズレがありますが、それらの関係を散布図を使って可視化したのが以下のチャートです。それぞれの点はそれぞれの行を表しています。トレーニングデータは青色に、テストデータはオレンジ色として分けて可視化しています。
<% } %>

{start_lazy_show_hide}
### チャート
{{actual_predicted}}
{end_lazy_show_hide}

# 次のステップ

* 変数選択の最適化：変数重要度が低い予測変数を除外して、モデルをシンプルにすることを検討してください。これにより、モデルの解釈がしやすくなり、過剰適合のリスクも減少します。
* グループ別分析：グループごとに別々のモデルを作成することで、それぞれのグループ内での<%= target %>の決定要因をより詳細に理解できるかもしれません。その場合は、「繰り返し」にグループとなる変数を選択し、実行し直すことができます。
* 外れ値の確認：予測精度に影響を与える可能性のある外れ値がないか確認し、必要に応じて対処することで、モデルの信頼性が向上する可能性があります。
<% if (!test_mode) { %>
* モデルの評価：このモデルの予測性能をより厳密に評価するために、トレーニングデータとテストデータに分けて検証することができます。その場合は、[「設定」](//analytics/settings)より「検証」セクションの下の「テストモード」をTRUEに設定し、実行し直してください。
<% } %>

`;

module.exports = template;
